!function(e){"function"==typeof define&&define.amd?define(["src/assets/js/jquery"],e):"object"==typeof exports?e(require("src/assets/js/jquery")):e(jQuery)}(function(e){var t=navigator.userAgent,n=/iphone/i.test(t),a=/chrome/i.test(t),i=/android/i.test(t);e.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},autoclear:!0,dataName:"rawMaskFn",placeholder:"_"},e.fn.extend({caret:function(e,t){var n;if(0!==this.length&&!this.is(":hidden")&&this.get(0)===document.activeElement)return"number"==typeof e?(t="number"==typeof t?t:e,this.each(function(){this.setSelectionRange?this.setSelectionRange(e,t):this.createTextRange&&((n=this.createTextRange()).collapse(!0),n.moveEnd("character",t),n.moveStart("character",e),n.select())})):(this[0].setSelectionRange?(e=this[0].selectionStart,t=this[0].selectionEnd):document.selection&&document.selection.createRange&&(n=document.selection.createRange(),e=0-n.duplicate().moveStart("character",-1e5),t=e+n.text.length),{begin:e,end:t})},unmask:function(){return this.trigger("unmask")},mask:function(t,r){var o,c,s,l,u,f,h;if(!t&&this.length>0){var g=e(this[0]).data(e.mask.dataName);return g?g():void 0}return r=e.extend({autoclear:e.mask.autoclear,placeholder:e.mask.placeholder,completed:null},r),o=e.mask.definitions,c=[],s=f=t.length,l=null,t=String(t),e.each(t.split(""),function(e,t){"?"==t?(f--,s=e):o[t]?(c.push(new RegExp(o[t])),null===l&&(l=c.length-1),e<s&&(u=c.length-1)):c.push(null)}),this.trigger("unmask").each(function(){var g=e(this),d=e.map(t.split(""),function(e,t){if("?"!=e)return o[e]?b(t):e}),m=d.join(""),p=g.val();function v(){if(r.completed){for(var e=l;e<=u;e++)if(c[e]&&d[e]===b(e))return;r.completed.call(g)}}function b(e){return e<r.placeholder.length?r.placeholder.charAt(e):r.placeholder.charAt(0)}function k(e){for(;++e<f&&!c[e];);return e}function y(e,t){var n,a;if(!(e<0)){for(n=e,a=k(t);n<f;n++)if(c[n]){if(!(a<f&&c[n].test(d[a])))break;d[n]=d[a],d[a]=b(a),a=k(a)}A(),g.caret(Math.max(l,e))}}function j(e){R(),g.val()!=p&&g.change()}function x(e,t){var n;for(n=e;n<t&&n<f;n++)c[n]&&(d[n]=b(n))}function A(){g.val(d.join(""))}function R(e){var t,n,a,i=g.val(),o=-1;for(t=0,a=0;t<f;t++)if(c[t]){for(d[t]=b(t);a++<i.length;)if(n=i.charAt(a-1),c[t].test(n)){d[t]=n,o=t;break}if(a>i.length){x(t+1,f);break}}else d[t]===i.charAt(a)&&a++,t<s&&(o=t);return e?A():o+1<s?r.autoclear||d.join("")===m?(g.val()&&g.val(""),x(0,f)):A():(A(),g.val(g.val().substring(0,o+1))),s?t:l}g.data(e.mask.dataName,function(){return e.map(d,function(e,t){return c[t]&&e!=b(t)?e:null}).join("")}),g.one("unmask",function(){g.off(".mask").removeData(e.mask.dataName)}).on("blur.mask",j).on("keydown.mask",function(e){if(!g.prop("readonly")){var t,a,i,r=e.which||e.keyCode;h=g.val(),8===r||46===r||n&&127===r?(a=(t=g.caret()).begin,(i=t.end)-a==0&&(a=46!==r?function(e){for(;--e>=0&&!c[e];);return e}(a):i=k(a-1),i=46===r?k(i):i),x(a,i),y(a,i-1),e.preventDefault()):13===r?j.call(this,e):27===r&&(g.val(p),g.caret(0,R()),e.preventDefault())}}).on("keypress.mask",function(t){if(!g.prop("readonly")){var n,a,r,o=t.which||t.keyCode,s=g.caret();t.ctrlKey||t.altKey||t.metaKey||o<32||!o||13===o||(s.end-s.begin!=0&&(x(s.begin,s.end),y(s.begin,s.end-1)),(n=k(s.begin-1))<f&&(a=String.fromCharCode(o),c[n].test(a))&&(function(e){var t,n,a,i;for(t=e,n=b(e);t<f;t++)if(c[t]){if(a=k(t),i=d[t],d[t]=n,!(a<f&&c[a].test(i)))break;n=i}}(n),d[n]=a,A(),r=k(n),i?setTimeout(function(){e.proxy(e.fn.caret,g,r)()},0):g.caret(r),s.begin<=u&&v()),t.preventDefault())}}).on("input.mask paste.mask",function(){g.prop("readonly")||setTimeout(function(){var e=R(!0);g.caret(e),v()},0)}),a&&i&&g.off("input.mask").on("input.mask",function(e){var t=g.val(),n=g.caret();if(h&&h.length&&h.length>t.length){for(R(!0);n.begin>0&&!c[n.begin-1];)n.begin--;if(0===n.begin)for(;n.begin<l&&!c[n.begin];)n.begin++;g.caret(n.begin,n.begin)}else{R(!0);var a=t.charAt(n.begin);n.begin<f&&(c[n.begin]?c[n.begin].test(a)&&n.begin++:(n.begin++,c[n.begin].test(a)&&n.begin++)),g.caret(n.begin,n.begin)}v()}),R()})}})});
